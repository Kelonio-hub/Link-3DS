<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">Archivos Nintendo | La Presa</title>

  <!-- Google Site Verification -->
  <meta name="google-site-verification" content="BgK5psyvjiJO1yoZ1sOIRa1dTQONgjMJwwIcNz-o_n0" />

  <!-- FAVICONS -->
  <link rel="icon" type="image/gif" href="https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Lucario.gif">
  <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Lucario.gif">
  <link rel="icon" type="image/png" sizes="192x192" href="https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Lucario.gif">
  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Lucario.gif">
  <meta name="msapplication-TileImage" content="https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Lucario.gif">

  <style>
    :root{
      --glass-bg: rgba(20,20,20,.65);
      --glass-border: rgba(255,255,255,.15);
      --green: #00ff88;
      --red: #ff2b2b;
      --blue-aura: #00aaff;
      --accent: #00aaff;
      --accent-glow: rgba(0,170,255,0.35);
      --orange: #ff8800;
    }

    *{box-sizing:border-box}
    html, body{
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    body{
      font-family: 'Segoe UI', system-ui, sans-serif;
      color: #fff;
      background:
        linear-gradient(to bottom, rgba(0,0,0,0.85), rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.7)),
        url('https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Fondo.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 0 50px;
    }

    header.barra-superior{
      width: 95%;
      max-width: 1100px;
      padding:12px 20px;
      background:rgba(0,0,0,.85);
      border-bottom:1px solid var(--glass-border);
      font-size:14px;
      backdrop-filter: blur(8px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
      border-radius: 14px;
      margin-bottom: 30px;
    }

    .barra-left{
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
      font-size: 13px;
    }

    .barra-left a{
      color:#fff;
      text-decoration:none;
      white-space: nowrap;
      opacity: 0.8;
      transition: opacity .3s;
    }

    .barra-left a:hover{
      opacity: 1;
      text-decoration:underline;
    }

    .barra-right{
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
    }

    .barra-right a{
      width:42px;
      height:42px;
      background:rgba(0,0,0,.75);
      border-radius:50%;
      display:flex;
      justify-content:center;
      align-items:center;
      border:1px solid var(--glass-border);
      transition:.3s;
      flex-shrink: 0;
    }

    .barra-right a:hover{
      transform:scale(1.15);
      box-shadow:0 0 15px rgba(255,255,255,.3);
    }

    .barra-right img{
      width:22px;
      height:22px;
    }

    .discord-text{
      font-size: 14px;
      opacity: 0.9;
      white-space: nowrap;
    }

    .language-selector select{
      padding:6px 10px;
      background:rgba(0,0,0,.8);
      color:#fff;
      border-radius:8px;
      border:1px solid var(--glass-border);
    }

    .container{
      width: 95%;
      max-width: 1100px;
      padding: 40px;
      border-radius: 22px;
      display: grid;
      grid-template-columns: 1fr 260px;
      gap: 30px;
      background: var(--glass-bg);
      backdrop-filter: blur(18px);
      border: 1px solid var(--glass-border);
      box-shadow: 0 25px 60px rgba(0,0,0,0.8);
      overflow: hidden;
    }

    .text-image-container{
      display:flex;
      justify-content: space-between;
      align-items:flex-start;
      gap:20px;
      width:100%;
    }

    .text-section p{
      font-size: 23px;
      font-weight:800;
      margin-bottom:20px;
      text-shadow:0 0 18px rgba(0,255,136,.4);
      line-height: 1.2;
    }

    .note{
      font-size:15px;
      line-height:1.8;
      opacity:.85;
    }

    .step {
      transition: all 0.4s ease;
      opacity: 0.7;
    }

    .step.active {
      opacity: 1;
      color: var(--blue-aura);
      text-shadow: 
        0 0 10px var(--blue-aura),
        0 0 20px var(--blue-aura),
        0 0 30px var(--blue-aura);
      animation: auraPulse 2s infinite alternate;
    }

    @keyframes auraPulse {
      from { text-shadow: 0 0 10px var(--blue-aura), 0 0 20px var(--blue-aura), 0 0 30px var(--blue-aura); }
      to { text-shadow: 0 0 20px var(--blue-aura), 0 0 40px var(--blue-aura), 0 0 60px var(--blue-aura); }
    }

    #consoleImageContainer {
      display: flex;
      width: 260px;
      flex-shrink: 0;
      justify-content: flex-end;
    }

    #consoleImageContainer img {
      width: 100%;
      height: auto;
      object-fit: contain;
      display: block;
    }

    .button-section{
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items: center;
      gap:20px;
      min-height: 120px;
    }

    button{
      padding:16px 32px;
      font-size:18px;
      font-weight:800;
      border:none;
      border-radius:14px;
      cursor:pointer;
      background:var(--red);
      color:#ffffff;
      box-shadow:0 0 20px rgba(255,0,0,.5);
      transition:.3s;
      min-width: 210px;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      white-space: nowrap;
    }

    button:hover{
      transform:translateY(-2px) scale(1.05);
      box-shadow:0 0 30px rgba(255,0,0,.8);
    }

    #loading{
      display: none;
      flex-direction: column;
      align-items: center;
      gap: 15px;
      padding: 20px;
    }

    #loadingGif{
      width: 150px;
      height: 150px;
      filter: drop-shadow(0 0 20px var(--blue-aura));
    }

    #loadingText{
      text-align: center;
      font-size: 18px;
      font-weight: 800;
      color: var(--blue-aura);
      text-shadow: 
        0 0 10px var(--blue-aura),
        0 0 20px var(--blue-aura),
        0 0 30px var(--blue-aura);
      animation: auraPulse 2s infinite alternate;
      line-height: 1.4;
    }

    .console-search-container{
      grid-column:1/-1;
      display:flex;
      flex-direction: column;
      gap: 20px;
      margin-top:10px;
    }

    .console-selector{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      justify-content: center;
    }

    .console-button{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      background:rgba(255,255,255,.08);
      border-radius:16px;
      border:1px solid var(--glass-border);
      font-weight:800;
      cursor:pointer;
      transition:.35s;
      color: #ffffff;
      position: relative;
      min-width: 0;
    }

    .console-button img{
      width:32px;
      height:32px;
      flex-shrink:0;
    }

    .console-button span{
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100px;
    }

    .console-button:hover{
      transform:translateY(-3px);
      background:rgba(0,170,255,.15);
      border:1px solid rgba(0,170,255,.5);
      box-shadow:0 0 20px var(--accent-glow);
    }

    .amazon-wrapper {
      position: relative;
      display: inline-flex;
    }

    .amazon-dropdown {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(8px);
      background: rgba(30,30,50,0.95);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(0,170,255,0.4);
      border-radius: 14px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.7);
      min-width: 260px;
      padding: 12px 0;
      z-index: 2000;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .amazon-dropdown.active {
      visibility: visible;
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .amazon-category {
      padding: 10px 18px;
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .amazon-category img {
      width: 32px;
      height: 32px;
    }

    .amazon-category:hover {
      background: rgba(0,170,255,0.25);
      color: #00aaff;
    }

    .search-bar-full {
      width: 100%;
      max-width: 700px;
      margin: 0 auto;
      position: relative;
    }

    .search-bar-full input {
      width: 100%;
      padding: 16px 20px 16px 56px;
      border-radius: 50px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(30,30,40,0.55);
      backdrop-filter: blur(16px);
      color: #fff;
      font-size: 17px;
      box-shadow: 0 4px 30px rgba(0,0,0,0.25), inset 0 0 10px rgba(0,170,255,0.08);
      transition: all 0.35s ease;
    }

    .search-bar-full input::placeholder {
      color: rgba(0,170,255,0.7);
    }

    .search-bar-full .search-icon {
      position: absolute;
      left: 18px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 22px;
      color: var(--blue-aura);
      pointer-events: none;
    }

    .search-bar-full input:hover,
    .search-bar-full input:focus {
      background: rgba(30,45,60,0.65);
      box-shadow: 0 8px 40px var(--accent-glow), 0 0 0 2px rgba(0,170,255,0.5);
      outline: none;
    }

    .files-section{
      grid-column:1/-1;
      display:none;
      flex-direction:column;
      gap:18px;
      margin-top:20px;
      padding-right:5px;
    }

    /* Estilos base para todas las tarjetas */
    .file-card{
      position: relative;
      background:rgba(255,255,255,.06);
      border-radius:14px;
      cursor:pointer;
      border:2px solid transparent;
      transition:.25s;
      overflow: hidden;
    }

    .file-card .file-title {
      word-break: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      font-weight: 700;
      font-size: 15.5px;
      line-height: 1.3;
    }

    .file-card:hover{
      transform:translateY(-4px);
      background:rgba(255,255,255,.12);
    }

    /* Tarjetas horizontales comunes (consolas y Amazon) */
    .file-card.console-card,
    .file-card.amazon-card {
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      align-items: center;
      text-align: left;
      gap: 20px;
      padding: 18px;
    }

    .file-card.console-card img,
    .file-card.amazon-card img {
      flex-shrink: 0;
      border-radius: 18px;
      background: rgba(255,255,255,0.05);
      transition: transform .3s ease;
    }

    .file-card.console-card .text-content,
    .file-card.amazon-card .text-content {
      display: flex;
      flex-direction: column;
      flex: 1;
      min-width: 0;
    }

    .file-card.console-card .file-title,
    .file-card.amazon-card .file-title {
      margin-bottom: 6px;
      padding: 0;
    }

    .file-card.console-card:hover img,
    .file-card.amazon-card:hover img {
      transform: scale(1.06);
    }

    /* Espec√≠fico para consolas (imagen cuadrada) */
    .file-card.console-card img {
      width: 100px;
      height: 100px;
      object-fit: contain;
    }

    /* Espec√≠fico para Amazon (imagen rectangular + lupa) */
    .file-card.amazon-card {
      padding: 14px;
      gap: 16px;
    }

    .file-card.amazon-card img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      cursor: zoom-in;
      border-radius: 12px;
    }

    .file-card.amazon-card::after{
      content: "üîç";
      position: absolute;
      top: 12px;
      left: 12px;
      font-size: 22px;
      opacity: 0;
      transition: opacity .3s;
      pointer-events: none;
      text-shadow: 0 0 8px rgba(0,0,0,0.8);
    }

    .file-card.amazon-card:hover::after{
      opacity: 0.8;
    }

    .product-desc {
      font-size: 14px;
      opacity: 0.88;
      line-height: 1.4;
      color: #ddd;
    }

    #donationModal{
      display:none;
      position:fixed;
      top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.85);
      backdrop-filter:blur(12px);
      justify-content:center;
      align-items:center;
      z-index:9999;
      flex-direction:column;
    }

    .modal-content{
      position:relative;
      background:var(--glass-bg);
      border:1px solid var(--glass-border);
      border-radius:20px;
      padding:30px;
      max-width:90%;
      width:440px;
      text-align:center;
      box-shadow:0 20px 60px rgba(0,0,0,0.9);
    }

    .modal-close{
      position:absolute;
      top:12px;
      right:16px;
      font-size:28px;
      font-weight:bold;
      color:#fff;
      opacity:0.7;
      cursor:pointer;
      width:30px;
      height:30px;
      display:flex;
      justify-content:center;
      align-items:center;
      border-radius:50%;
      transition:.3s;
    }

    .modal-close:hover{
      opacity:1;
      background:rgba(255,255,255,0.1);
    }

    .modal-content h2{
      color:var(--green);
      margin-top:0;
    }

    .donate-buttons{
      display:flex;
      justify-content:center;
      gap:30px;
      margin:30px 0;
    }

    .donate-buttons a img{
      width:90px;
      height:90px;
      border-radius:14px;
      transition:transform .3s;
    }

    .donate-buttons a img:hover{
      transform:scale(1.1);
    }

    #closeDonationBtn{
      padding:14px 36px;
      font-size:18px;
      font-weight:800;
      background:var(--green);
      color:#000;
      border:none;
      border-radius:14px;
      cursor:pointer;
    }

    #imageModal{
      display:none;
      position:fixed;
      top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.92);
      backdrop-filter:blur(12px);
      justify-content:center;
      align-items:center;
      z-index:9999;
      padding:20px;
    }

    #imageModal img{
      max-width:95%;
      max-height:95vh;
      border-radius:16px;
      box-shadow:0 20px 60px rgba(0,0,0,0.9);
    }

    #imageModal .modal-close{
      position:absolute;
      top:20px;
      right:20px;
      font-size:32px;
    }

    #guiaModal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.88);
      backdrop-filter: blur(12px);
      z-index: 9999;
      justify-content: center;
      align-items: center;
      padding: 20px;
      overflow-y: auto;
    }

    .guia-content {
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      max-width: 1100px;
      width: 100%;
      padding: 32px;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.9);
    }

    .guia-close {
      position: absolute;
      top: 16px;
      right: 20px;
      font-size: 36px;
      font-weight: bold;
      cursor: pointer;
      color: #fff;
      opacity: 0.8;
      transition: 0.3s;
    }

    .guia-close:hover {
      opacity: 1;
    }

    .guia-titulo {
      font-size: 28px;
      font-weight: 900;
      color: var(--green);
      margin: 0 0 35px;
      text-align: center;
      text-shadow: 0 0 15px var(--green);
    }

    .guia-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      align-items: start;
    }

    .guia-seccion-titulo {
      font-size: 22px;
      font-weight: 800;
      margin: 20px 0 15px;
    }

    .guia-pasos-titulo {
      color: var(--orange);
      text-shadow: 0 0 12px rgba(255,136,0,0.4);
    }

    .guia-pasos {
      line-height: 1.8;
      font-size: 16px;
      opacity: 0.95;
      color: #fff;
    }

    .guia-pasos ol {
      padding-left: 22px;
      margin: 12px 0;
    }

    .guia-pasos li {
      margin-bottom: 10px;
    }

    .guia-derecha {
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .video-wrapper {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.7);
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }

    .guia-archivo-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      padding: 20px 40px;
      background: var(--green);
      color: #000;
      font-size: 21px;
      font-weight: 900;
      border-radius: 16px;
      cursor: pointer;
      transition: .3s;
      box-shadow: 0 0 30px rgba(0,255,136,.6);
    }

    .guia-archivo-btn:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 0 50px rgba(0,255,136,.9);
    }

    .guia-archivo-btn img {
      width: 56px;
      height: 56px;
    }

    @media (max-width: 900px) {
      .container {
        grid-template-columns: 1fr;
        padding: 30px 20px;
      }

      .text-image-container {
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 25px;
      }

      #consoleImageContainer {
        width: 240px;
        margin: 0 auto;
      }

      .text-section p {
        font-size: 21px;
      }

      .guia-grid {
        grid-template-columns: 1fr;
        gap: 35px;
      }

      .guia-derecha {
        order: -1;
      }

      .video-wrapper {
        padding-bottom: 58%;
      }
    }

    @media (max-width: 768px) {
      header.barra-superior {
        padding: 14px 16px;
        border-radius: 12px;
        gap: 14px;
      }

      .barra-left a {
        font-size: 12.5px;
      }

      .button-section button {
        padding: 15px 30px;
        font-size: 17.5px;
      }

      .console-button {
        padding: 9px 11px;
      }

      .console-button span {
        font-size: 13px;
        max-width: 80px;
      }

      .guia-content {
        padding: 28px 20px;
        margin: 15px;
      }

      .guia-titulo {
        font-size: 25px;
      }

      .guia-seccion-titulo {
        font-size: 21px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 15px 0 40px;
      }

      header.barra-superior {
        flex-direction: column;
        text-align: center;
        padding: 16px;
        gap: 16px;
      }

      .barra-left {
        justify-content: center;
        gap: 12px;
        font-size: 13px;
      }

      .barra-right {
        flex-direction: row;
        justify-content: center;
        gap: 14px;
      }

      .discord-text {
        display: none;
      }

      .language-selector select {
        padding: 7px 11px;
        font-size: 14px;
      }

      .container {
        padding: 24px 16px;
        border-radius: 18px;
      }

      .text-section p {
        font-size: 19px;
        line-height: 1.3;
      }

      .note {
        font-size: 14.5px;
        line-height: 1.7;
      }

      .step {
        font-size: 14.5px;
      }

      #consoleImageContainer {
        width: 200px;
      }

      button {
        padding: 14px 28px;
        font-size: 17px;
        min-width: 180px;
      }

      .search-bar-full input {
        padding: 14px 18px 14px 52px;
        font-size: 16px;
      }

      .search-bar-full .search-icon {
        left: 16px;
        font-size: 20px;
      }

      .console-selector {
        gap: 10px;
        padding: 0 10px;
      }

      .console-button {
        padding: 10px 12px;
        flex: 0 1 135px;
        justify-content: center;
      }

      .console-button img {
        width: 28px;
        height: 28px;
      }

      .console-button span {
        font-size: 13px;
        max-width: 78px;
      }

      .file-card.console-card,
      .file-card.amazon-card {
        flex-direction: column;
        text-align: center;
        padding: 20px 16px;
        gap: 18px;
      }

      .file-card.console-card img,
      .file-card.amazon-card img {
        width: 150px;
        height: 150px;
        object-fit: contain;
        margin: 0 auto;
        border-radius: 16px;
      }

      .file-card.amazon-card img {
        object-fit: cover;
      }

      .file-card .file-title {
        font-size: 16px;
        line-height: 1.4;
      }

      .product-desc {
        font-size: 14px;
        opacity: 0.9;
      }

      .guia-content {
        padding: 24px 16px;
        border-radius: 18px;
      }

      .guia-titulo {
        font-size: 23px;
        margin-bottom: 25px;
      }

      .guia-pasos {
        font-size: 15px;
      }

      .guia-archivo-btn {
        padding: 16px 30px;
        font-size: 18px;
        gap: 12px;
      }

      .guia-archivo-btn img {
        width: 46px;
        height: 46px;
      }

      .modal-content {
        width: 92%;
        padding: 28px 20px;
      }

      .donate-buttons a img {
        width: 80px;
        height: 80px;
      }
    }

    @media (max-width: 360px) {
      #consoleImageContainer {
        width: 170px;
      }

      .file-card.console-card img,
      .file-card.amazon-card img {
        width: 130px;
        height: 130px;
      }

      .text-section p {
        font-size: 18px;
      }

      button {
        font-size: 16.5px;
        padding: 13px 26px;
      }

      .console-button span {
        font-size: 12.5px;
        max-width: 70px;
      }
    }
  </style>
</head>

<body data-lang="es">

  <header class="barra-superior">
    <div class="barra-left">
      <a href="https://kelonio-hub.github.io/Archivos-Kelonio/privacy.html" target="_blank"><span id="privacyText">Pol√≠tica de Privacidad</span></a>
      <span style="color:#666;">|</span>
      <a href="https://kelonio-hub.github.io/Archivos-Kelonio/terms.html" target="_blank"><span id="termsText">T√©rminos del Servicio</span></a>
    </div>

    <div class="barra-right">
      <span class="discord-text" id="discordText">Respondemos tus dudas en Discord:</span>
      <a href="https://discord.gg/8Fv8GDg" target="_blank" title="Discord La Presa"><img src="https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Presa.png" alt="Discord La Presa"></a>
      <a href="https://discord.com/invite/xHg7XaYJvK" target="_blank" title="Discord Wiide"><img src="https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Wiide.png" alt="Discord Wiide"></a>
      
      <div class="language-selector">
        <select id="language-select" onchange="cambiarIdioma(this.value)">
          <option value="en"selected>English</option> 
          <option value="es" >Espa√±ol</option>
        </select>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="text-image-container">
      <div class="text-section" id="textSection">
        <p id="mainText">¬°Suscr√≠bete para acceder al contenido!</p>
        <div class="note" id="instructions">
          <div class="step active" id="step1">1. Haz clic en el bot√≥n de suscripci√≥n.</div>
          <div class="step" id="step2">2. Confirma la suscripci√≥n en YouTube.</div>
          <div class="step" id="step3">3. Espera hasta que se verifique la suscripci√≥n.</div>
          <div class="step" id="step4">4. Selecciona la consola y los archivos que deseas descargar.</div>
        </div>
      </div>
      <div id="consoleImageContainer"></div>
    </div>

    <div class="button-section" id="buttonContainer">
      <button id="subscribeBtn">Suscribirse</button>

      <div id="loading">
        <img src="https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Lucario.gif" alt="Unlocking..." id="loadingGif">
        <div id="loadingText"></div>
      </div>
    </div>

    <div class="console-search-container" id="consoleSearchContainer" style="display:none;">
      <div class="console-selector" id="consoleSelector"></div>
      
      <div class="search-bar-full">
        <div class="search-icon">üîç</div>
        <input type="text" id="fileSearch" placeholder="Buscar archivos..." list="file-suggestions">
      </div>
    </div>

    <div class="files-section" id="filesSection"></div>
  </div>

  <!-- Modal de donaci√≥n -->
  <div id="donationModal">
    <div class="modal-content">
      <span class="modal-close" id="modalClose">√ó</span>
      <h2 id="donationTitle">¬°Gracias por confiar en nosotros!</h2>
      <p id="donationMessage">
        Aunque todo el contenido es <strong>gratuito</strong>, tu donaci√≥n ayuda a mantener y a mejorar el proyecto.
      </p>
      <div class="donate-buttons" id="donateButtons">
        <a href="https://www.paypal.com/paypalme/kelohack" target="_blank">
          <img src="https://static.vecteezy.com/system/resources/previews/067/805/127/non_2x/paypal-logo-square-rounded-paypal-logo-free-download-paypal-logo-free-png.png" alt="PayPal">
        </a>
        <a id="kofiLink" href="https://ko-fi.com/lapresa" target="_blank">
          <img src="https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/ko-fi-icon.png" alt="Ko-fi">
        </a>
      </div>
      <button id="closeDonationBtn">Continuar al archivo ‚Üí</button>
    </div>
  </div>

  <!-- Modal para ampliar imagen de productos Amazon -->
  <div id="imageModal">
    <span class="modal-close" id="imageModalClose">√ó</span>
    <img id="enlargedImage" src="" alt="Imagen ampliada">
  </div>

  <!-- MODAL DE GU√çA -->
  <div id="guiaModal">
    <div class="guia-content">
      <span class="guia-close" id="guiaClose">√ó</span>
      
      <h2 class="guia-titulo" id="guiaTitulo"></h2>
      
      <div class="guia-grid">
        <div>
          <div class="guia-seccion-titulo guia-pasos-titulo" id="guiaPasosTitulo"></div>
          <div class="guia-pasos" id="guiaPasos"></div>
        </div>
        
        <div class="guia-derecha">
          <div class="video-wrapper" id="videoWrapper">
            <iframe id="guiaVideo" src="" allowfullscreen allow="autoplay"></iframe>
          </div>
          
          <div class="guia-archivo-btn" id="btnDescargarGuia">
            <img src="https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Zip.png" alt="Archivo RAR">
            Descargar Archivos
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const datalist = document.createElement('datalist');
    datalist.id = 'file-suggestions';
    document.body.appendChild(datalist);

    function actualizarSugerencias() {
      datalist.innerHTML = '';
      const set = new Set();
      Object.values(mediaFiles).forEach(cat => cat.forEach(item => item.label[idiomaActual] && set.add(item.label[idiomaActual])));
      amazonProducts.forEach(item => item.label[idiomaActual] && set.add(item.label[idiomaActual]));
      set.forEach(l => {
        const opt = document.createElement('option');
        opt.value = l;
        datalist.appendChild(opt);
      });
    }

    const translations = {
      en: {
        pageTitle: "Nintendo Files | La Presa",
        mainText: "Subscribe to access content!",
        instructions: [
          "1. Click the subscribe button.",
          "2. Confirm subscription on YouTube.",
          "3. Wait until the subscription is verified.",
          "4. Select the console and the files you want to download."
        ],
        subscribe: "Subscribe",
        loadingText: "Unlocking<br>ancient magic...",
        searchPlaceholder: "Search files...",
        privacyText: "Privacy Policy",
        termsText: "Terms of Service",
        discordText: "We answer your questions on Discord:",
        donationTitle: "Thank you for trusting us!",
        donationMessage: "Although all content is <strong>free</strong>, your donation helps maintain and improve the project.",
        continueBtn: "Continue to file ‚Üí",
        pasosTitle: "Steps to Follow"
      },
      es: {
        pageTitle: "Archivos Nintendo | La Presa",
        mainText: "¬°Suscr√≠bete para acceder al contenido!",
        instructions: [
          "1. Haz clic en el bot√≥n de suscripci√≥n.",
          "2. Confirma la suscripci√≥n en YouTube.",
          "3. Espera hasta que se verifique la suscripci√≥n.",
          "4. Selecciona la consola y los archivos que deseas descargar."
        ],
        subscribe: "Suscribirse",
        loadingText: "Desbloqueando<br>magia ancestral...",
        searchPlaceholder: "Buscar archivos...",
        privacyText: "Pol√≠tica de Privacidad",
        termsText: "T√©rminos del Servicio",
        discordText: "Respondemos tus dudas en Discord:",
        donationTitle: "¬°Gracias por confiar en nosotros!",
        donationMessage: "Aunque todo el contenido es <strong>gratuito</strong>, tu donaci√≥n ayuda a mantener y a mejorar el proyecto.",
        continueBtn: "Continuar al archivo ‚Üí",
        pasosTitle: "PASOS A SEGUIR"
      }
    };

    let idiomaActual = 'es';
    let categoriaActual = null;
    let amazonSubcategoria = null;
    let pendingUrl = null;
    let currentConsoleId = null;

    const subscribeBtn = document.getElementById('subscribeBtn');
    const loading = document.getElementById('loading');
    const loadingText = document.getElementById('loadingText');
    const consoleSearchContainer = document.getElementById('consoleSearchContainer');
    const consoleSelector = document.getElementById('consoleSelector');
    const filesSection = document.getElementById('filesSection');
    const fileSearchInput = document.getElementById('fileSearch');
    const consoleImageContainer = document.getElementById('consoleImageContainer');
    const privacyText = document.getElementById('privacyText');
    const termsText = document.getElementById('termsText');
    const discordText = document.getElementById('discordText');

    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const step4 = document.getElementById('step4');

    const donationModal = document.getElementById('donationModal');
    const donationTitle = document.getElementById('donationTitle');
    const donationMessage = document.getElementById('donationMessage');
    const closeDonationBtn = document.getElementById('closeDonationBtn');
    const modalClose = document.getElementById('modalClose');
    const kofiLink = document.getElementById('kofiLink');

    const imageModal = document.getElementById('imageModal');
    const imageModalClose = document.getElementById('imageModalClose');
    const enlargedImage = document.getElementById('enlargedImage');

    const guiaModal = document.getElementById('guiaModal');
    const guiaTitulo = document.getElementById('guiaTitulo');
    const guiaPasosTitulo = document.getElementById('guiaPasosTitulo');
    const guiaPasos = document.getElementById('guiaPasos');
    const guiaVideo = document.getElementById('guiaVideo');
    const btnDescargarGuia = document.getElementById('btnDescargarGuia');
    const guiaClose = document.getElementById('guiaClose');

    function activarPaso(n) {
      [step1, step2, step3, step4].forEach((s, i) => {
        if (s) s.classList.toggle('active', i + 1 === n);
      });
    }

    const categories = [
      { id: 'switch', icon: 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Switch.png', label: 'SWITCH' },
      { id: '3ds', icon: 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%203DS.png', label: '3DS' },     
      { id: 'nds', icon: 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20NDS.png', label: 'NDS' },
      { id: 'wii', icon: 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Wii.png', label: 'WII / WIIU' },
      { id: 'SD', icon: 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20SD.png', label: 'SD / USB' },
      { id: 'amazon', icon: 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20productos.png', label: 'PRODUCTOS' }
    ];

    let mediaFiles = {};
    let amazonProducts = {};
    let consolasCreadas = false;

    // URLs raw de las im√°genes especiales
    const IMG_WII_MINI = 'https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Logo%20Mini.png';
    const IMG_WIIU = 'https://raw.githubusercontent.com/Kelonio-hub/Archivos-Kelonio/main/img/Logo%20WiiU.png';

    function mostrarModalDonacion(urlDestino, consoleId) {
      if (sessionStorage.getItem('donacionMostrada') === 'true') {
        window.open(urlDestino, '_blank');
        return;
      }

      pendingUrl = urlDestino;
      currentConsoleId = consoleId;

      if (consoleId === 'wii' || consoleId === 'SD') {
        kofiLink.href = 'https://ko-fi.com/wiide';
      } else {
        kofiLink.href = 'https://ko-fi.com/lapresa';
      }

      donationTitle.textContent = translations[idiomaActual].donationTitle;
      donationMessage.innerHTML = translations[idiomaActual].donationMessage;
      closeDonationBtn.textContent = translations[idiomaActual].continueBtn;

      donationModal.style.display = 'flex';
    }

    function cerrarModalDonacion() {
      donationModal.style.display = 'none';
      pendingUrl = null;
    }

    function cerrarModalYContinuar() {
      sessionStorage.setItem('donacionMostrada', 'true');
      donationModal.style.display = 'none';
      if (pendingUrl) {
        window.open(pendingUrl, '_blank');
        pendingUrl = null;
      }
    }

    closeDonationBtn.onclick = cerrarModalYContinuar;
    modalClose.onclick = cerrarModalDonacion;
    donationModal.onclick = (e) => {
      if (e.target === donationModal) {
        cerrarModalDonacion();
      }
    };

    imageModalClose.onclick = () => {
      imageModal.style.display = 'none';
    };

    imageModal.onclick = (e) => {
      if (e.target === imageModal) {
        imageModal.style.display = 'none';
      }
    };

    function mostrarModalGuia(item, consoleId) {
      guiaTitulo.textContent = item.label[idiomaActual] || item.label.es || item.label.en;

      guiaPasosTitulo.textContent = translations[idiomaActual].pasosTitle;

      const pasos = item.pasos?.[idiomaActual] || item.pasos?.es || '';
      guiaPasos.innerHTML = '<ol>' + 
        pasos.split('\n')
          .filter(l => l.trim() !== '')
          .map(l => `<li>${l}</li>`)
          .join('') + 
        '</ol>';

      if (item.videoYoutubeId) {
        guiaVideo.src = `https://www.youtube.com/embed/${item.videoYoutubeId}?rel=0&modestbranding=1`;
        document.getElementById('videoWrapper').style.display = 'block';
      } else {
        guiaVideo.src = '';
        document.getElementById('videoWrapper').style.display = 'none';
      }

      btnDescargarGuia.onclick = () => {
        guiaModal.style.display = 'none';
        if (item.url) {
          mostrarModalDonacion(item.url, consoleId);
        }
      };

      guiaModal.style.display = 'flex';
    }

    guiaClose.onclick = () => {
      guiaModal.style.display = 'none';
      guiaVideo.src = '';
    };

    guiaModal.onclick = (e) => {
      if (e.target === guiaModal) {
        guiaModal.style.display = 'none';
        guiaVideo.src = '';
      }
    };

    function cambiarIdioma(lang) {
      idiomaActual = lang;
      document.getElementById('mainText').innerHTML = translations[lang].mainText;
      
      const pasos = translations[lang].instructions;
      step1.textContent = pasos[0];
      step2.textContent = pasos[1];
      step3.textContent = pasos[2];
      step4.textContent = pasos[3];

      subscribeBtn.innerText = translations[lang].subscribe;
      fileSearchInput.placeholder = translations[lang].searchPlaceholder;
      if (loadingText && loading.style.display !== 'none') loadingText.innerHTML = translations[lang].loadingText;
      document.title = translations[lang].pageTitle;
      privacyText.innerText = translations[lang].privacyText;
      termsText.innerText = translations[lang].termsText;
      discordText.innerText = translations[lang].discordText;

      document.body.dataset.lang = lang;

      if (categoriaActual) {
        if (categoriaActual === 'amazon' && amazonSubcategoria) {
          mostrarProductosAmazon(amazonSubcategoria);
        } else {
          mostrarContenido(categoriaActual);
        }
      }

      actualizarSugerencias();
      fileSearchInput.dispatchEvent(new Event('input'));
    }

    async function cargarDatos() {
      try {
        const [c, p] = await Promise.all([
          fetch('https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/data/consolas.json'),
          fetch('https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/data/productos.json')
        ]);
        mediaFiles = await c.json();
        amazonProducts = await p.json();
        return true;
      } catch (e) {
        console.error(e);
        alert('Error al cargar datos. Recarga la p√°gina.');
        return false;
      }
    }

    function manejarClickGuia(item, consoleId) {
      if (item.tipo === 'guia' && item.guiaPath) {
        fetch(`https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/data/${item.guiaPath}.json`)
          .then(r => {
            if (!r.ok) throw new Error('No encontrado');
            return r.json();
          })
          .then(guiaData => {
            const fullItem = { ...item, ...guiaData };
            mostrarModalGuia(fullItem, consoleId);
          })
          .catch(err => {
            console.error(err);
            mostrarModalDonacion(item.url || '', consoleId);
          });
      } else {
        mostrarModalDonacion(item.url || '', consoleId);
      }
    }

    function mostrarContenido(catId) {
      categoriaActual = catId;
      amazonSubcategoria = null;
      currentConsoleId = catId;
      filesSection.innerHTML = '';
      filesSection.style.display = 'flex';
      consoleImageContainer.innerHTML = '';

      const cat = categories.find(c => c.id === catId);
      const img = document.createElement('img');
      img.src = cat.icon;
      img.style.width = '100%';
      consoleImageContainer.appendChild(img);

      const items = mediaFiles[catId] || [];

      items.forEach(item => {
        const card = document.createElement('div');
        card.className = 'file-card console-card';

        let thumb = item.img || cat.icon;

        const label = item.label[idiomaActual] || item.label.es || item.label.en || '';

        if (label.startsWith('Wii Mini')) {
          thumb = IMG_WII_MINI;
        } else if (label.includes('WiiU') || label.includes('vWii')) {
          thumb = IMG_WIIU;
        }

        const descHTML = item.desc && item.desc[idiomaActual] 
          ? `<div class="product-desc">${item.desc[idiomaActual]}</div>` 
          : '';

        card.innerHTML = `
          <img src="${thumb}" loading="lazy">
          <div class="text-content">
            <div class="file-title">${item.label[idiomaActual]}</div>
            ${descHTML}
          </div>
        `;

        card.onclick = () => manejarClickGuia(item, catId);

        filesSection.appendChild(card);
      });
    }

    function mostrarProductosAmazon(subcategoria) {
      categoriaActual = 'amazon';
      amazonSubcategoria = subcategoria;
      filesSection.innerHTML = '';
      filesSection.style.display = 'flex';
      consoleImageContainer.innerHTML = '';

      const img = document.createElement('img');
      img.src = 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20productos.png';
      img.style.width = '100%';
      consoleImageContainer.appendChild(img);

      amazonProducts
        .filter(p => p.console === subcategoria)
        .forEach(item => {
          const card = document.createElement('div');
          card.className = 'file-card amazon-card';

          const descHTML = item.desc && item.desc[idiomaActual]
            ? `<div class="product-desc">${item.desc[idiomaActual]}</div>`
            : '';

          card.innerHTML = `
            <img src="${item.img}" loading="lazy" alt="${item.label[idiomaActual]}">
            <div class="text-content">
              <div class="file-title">${item.label[idiomaActual]}</div>
              ${descHTML}
            </div>
          `;

          const imagen = card.querySelector('img');

          imagen.onclick = (e) => {
            e.stopPropagation();
            enlargedImage.src = item.img;
            imageModal.style.display = 'flex';
          };

          card.onclick = () => {
            window.open(item.url, '_blank');
          };

          filesSection.appendChild(card);
        });
    }

    fileSearchInput.addEventListener('input', () => {
      const query = fileSearchInput.value.toLowerCase().trim();

      filesSection.innerHTML = '';
      filesSection.style.display = query ? 'flex' : (categoriaActual ? 'flex' : 'none');

      if (!query) {
        if (categoriaActual === 'amazon' && amazonSubcategoria) mostrarProductosAmazon(amazonSubcategoria);
        else if (categoriaActual) mostrarContenido(categoriaActual);
        return;
      }

      const resultados = [];
      Object.entries(mediaFiles).forEach(([catId, items]) => {
        items.forEach(f => {
          if (f.label[idiomaActual].toLowerCase().includes(query)) {
            resultados.push({item: f, isAmazon: false, consoleId: catId});
          }
        });
      });
      amazonProducts.forEach(p => {
        if (p.label[idiomaActual].toLowerCase().includes(query)) {
          resultados.push({item: p, isAmazon: true});
        }
      });

      resultados.forEach(obj => {
        const item = obj.item;
        const card = document.createElement('div');

        if (obj.isAmazon) {
          card.className = 'file-card amazon-card';

          const descHTML = item.desc && item.desc[idiomaActual]
            ? `<div class="product-desc">${item.desc[idiomaActual]}</div>`
            : '';

          card.innerHTML = `
            <img src="${item.img}" loading="lazy">
            <div class="text-content">
              <div class="file-title">${item.label[idiomaActual]}</div>
              ${descHTML}
            </div>
          `;

          const imagen = card.querySelector('img');
          imagen.onclick = (e) => {
            e.stopPropagation();
            enlargedImage.src = item.img;
            imageModal.style.display = 'flex';
          };
          card.onclick = () => window.open(item.url, '_blank');
        } else {
          card.className = 'file-card console-card';

          const cat = categories.find(c => c.id === obj.consoleId);
          let thumb = item.img || (cat ? cat.icon : 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Zip.png');

          const label = item.label[idiomaActual] || item.label.es || item.label.en || '';

          if (label.startsWith('Wii Mini')) {
            thumb = IMG_WII_MINI;
          } else if (label.includes('WiiU') || label.includes('vWii')) {
            thumb = IMG_WIIU;
          }

          const descHTML = item.desc && item.desc[idiomaActual]
            ? `<div class="product-desc">${item.desc[idiomaActual]}</div>`
            : '';

          card.innerHTML = `
            <img src="${thumb}" loading="lazy">
            <div class="text-content">
              <div class="file-title">${item.label[idiomaActual]}</div>
              ${descHTML}
            </div>
          `;
          card.onclick = () => manejarClickGuia(item, obj.consoleId);
        }

        filesSection.appendChild(card);
      });
    });

    function generarCategoriasAmazon() {
      const dropdown = document.getElementById('amazonDropdown');
      if (dropdown && dropdown.children.length > 0) return;

      const uniq = new Map();
      amazonProducts.forEach(p => {
        if (!uniq.has(p.console)) uniq.set(p.console, {name: p.console, icon: getIconoConsola(p.console)});
      });

      uniq.forEach(c => {
        const el = document.createElement('div');
        el.className = 'amazon-category';
        el.innerHTML = `<img src="${c.icon}"><span>${c.name}</span>`;
        el.onclick = () => {
          dropdown.classList.remove('active');
          mostrarProductosAmazon(c.name);
        };
        dropdown.appendChild(el);
      });
    }

    function getIconoConsola(c) {
      const map = {
        'Switch': 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Switch.png',
        '3DS': 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%203DS.png',
        'NDS': 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20NDS.png',
        'Wii/WiiU': 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20Wii.png',      
        'SD/USB': 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20SD.png'
      };
      return map[c] || 'https://raw.githubusercontent.com/Kelonio-hub/Link-3DS/main/img/Logo%20productos.png';
    }

    subscribeBtn.addEventListener('click', () => {
      window.open('https://www.youtube.com/channel/UCJbYmHLNcrPUUA9oyBGtsKw?sub_confirmation=1', '_blank');

      activarPaso(2);

      setTimeout(() => subscribeBtn.style.display = 'none', 29000);
      setTimeout(() => {
        loadingText.innerHTML = translations[idiomaActual].loadingText;
        loading.style.display = 'flex';
        activarPaso(3);
      }, 30000);

      setTimeout(async () => {
        const ok = await cargarDatos();
        loading.style.display = 'none';
        if (!ok) { 
          subscribeBtn.style.display = 'block'; 
          activarPaso(1);
          return; 
        }

        actualizarSugerencias();
        consoleSearchContainer.style.display = 'flex';
        activarPaso(4);

        if (!consolasCreadas) {
          categories.forEach(cat => {
            const wrapper = document.createElement('div');
            wrapper.className = 'amazon-wrapper';

            const btn = document.createElement('div');
            btn.className = 'console-button';

            if (cat.id === 'amazon') {
              btn.innerHTML = `<img src="${cat.icon}"><span>${cat.label}</span>`;
              btn.onclick = e => {
                e.stopPropagation();
                const drop = document.getElementById('amazonDropdown') || (() => {
                  const d = document.createElement('div');
                  d.className = 'amazon-dropdown';
                  d.id = 'amazonDropdown';
                  wrapper.appendChild(d);
                  return d;
                })();
                drop.classList.toggle('active');
                generarCategoriasAmazon();
              };
              const drop = document.createElement('div');
              drop.className = 'amazon-dropdown';
              drop.id = 'amazonDropdown';
              wrapper.appendChild(btn);
              wrapper.appendChild(drop);
            } else {
              btn.innerHTML = `<img src="${cat.icon}"><span>${cat.label}</span>`;
              btn.onclick = () => mostrarContenido(cat.id);
              wrapper.appendChild(btn);
            }

            consoleSelector.appendChild(wrapper);
          });

          document.addEventListener('click', e => {
            const drop = document.getElementById('amazonDropdown');
            if (drop && !e.target.closest('.amazon-wrapper')) drop.classList.remove('active');
          });

          consolasCreadas = true;
        }

        fileSearchInput.setAttribute('list', 'file-suggestions');
      }, 60000);
    });

    cambiarIdioma('en');
  </script>
</body>
</html>